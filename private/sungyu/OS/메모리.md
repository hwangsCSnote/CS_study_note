# 메모리  

### 메모리 계층  

<img width="480" alt="IMG_0036-removebg-preview" src="https://github.com/user-attachments/assets/d66dbc1b-4725-48d5-8dbd-41323eab9c31" />

- **레지스터** : CPU 안에 있는 작은 메모리를 뜻하며, 속도가 가장 빠르고 기억 용량이 가장 적다. (휘발성)  
- **캐시** (L1, L2) : L1, L2 캐시를 지칭하며, 속도가 빠르고 기억 용량이 적다. (휘발성)  
- **주기억장치** (RAM) : RAM을 지칭하며, 속도, 기억 용량이 보통 수준이다. (휘발성)  
- **보조기억장치** (HDD, SSD) : HDD, SSD를 뜻하며, 속도가 느리고 기억 용량이 많다. (비휘발성)  

<br>

**메모리 계층의 목적** (=캐싱)  
**캐싱**(Cashing)을 이용하여 빠르고 작은 메모리와 크고 느린 메모리의 장점을 조합해서 크고 빠른 메모리처럼 활용하기 위해서  

<br>

### 캐시(Cache)  
> 데이터를 미리 복사해두는 임시 저장소이자, 빠른 장치와 느린 장치의 속도 차이에 따른 병목 현상을 줄이기 위한 메모리  

<br>

**CPU 와 메모리 간 성능 차이**  
<img width="606" height="324" alt="image" src="https://github.com/user-attachments/assets/7ba35071-e8fa-439b-8172-a043b2a15dda" />

- CPU는 데이터 처리를 위해 메모리와 끊임없이 데이터를 주고받는 구조  
- 메모리가 CPU의 데이터 처리 속도를 쫒아가지 못함  
- CPU가 메모리를 기다려야 하는 **병목현상** 발생

<br>

<img width="1439" height="627" alt="스크린샷 2026-01-29 05 24 37" src="https://github.com/user-attachments/assets/f2179a71-bba6-4936-8afd-9c30a17120a3" />  
Referenced : https://www.youtube.com/watch?v=JBFT4KyEvoY

- 병목현상 완화를 위해 용량은 작지만 속도가 빠른 **캐시 메모리**를 배치  
- 향후 **재사용 가능성이 높은 데이터** 복사본을 저장 후 CPU 요청 시, 바로 전달  

<br>

**시간 지역성**  
> 최근에 사용했던 데이터에 다시 접근하려는 특성  

**공간 지역성**  
> 최근 접근한 데이터를 이루고 있는 공간 또는 그 인접한 공간에 접근하는 특성  

<br>

```java
for (i = 0; i < 3; i++) {
	data[i+1] = data[i] + 1;	// 시간 지역성
}

'''	공간 지역성
data[1] = data[0] + 1;
data[2] = data[1] + 1;
data[3] = data[2] + 1
'''
```

<br>
<br>

**캐시 히트**  
> 캐시 메모리에서 원하는 데이터를 찾은 경우  

**캐시 미스**  
> 캐시 메모리에 원하는 데이터가 없어 주메모리(RAM)로 가서 데이터를 찾아오는 경우  

**캐시 매핑**  
> 캐시가 히트되기 위해 매핑하는 방법  

- CPU (레지스터)와 주메모리(RAM) 간에 데이터를 주고 받을 때를 기준  

- **직접 매핑**(Directed mapping) : 캐시가 `1-10`, 메모리가 `1-100`이라면, `1:1-10`, `2:11-20` 이런식으로 매핑 -> 처리가 빠르지만 충돌 발생이 잦다.  
- **연관 매핑**(Associative mapping) : 순서를 일치시키지 않고 관련있는 캐시와 메모리를 매핑 -> 충돌은 적지만 모든 블록을 탐색해야 해서 속도가 느리다.  
- **집합 연관 매핑**(Set associative mapping) : 두 매핑 방식을 합친 방법으로, 순서는 일치시키지만 집합을 둬서 저장하고 블록화되어 있기 때문에 검색이 효율적이다.  

<br>

**웹 브라우저 캐시**  
- **쿠키**(Cookie)  
- **로컬 스토리지**(Local Storage)  
- **세션 스토리지**(Session Storage)  

<br>

※ 캐싱(Caching)은 복사본을 이용하는 것이다.  
복사본과 원본이 달라지는 경우가 발생할 수 있으니 일관성 유지에 유의  
